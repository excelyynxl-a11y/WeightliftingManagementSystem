<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View participant</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<body>
    <main>
    <h1>Participants</h1>
    <div id="participants-container" class="participants">
        
    </div>
    </main> 

    <!-- edit participant popup start -->
    <div id="popupeditparticipant" class="popup" style="display: none;">
    <!-- <div id="popupeditparticipant" class="popup"> -->
        <div id="popupeditparticipant-content" class="popup-content">
            <h2>Edit Participant</h2>
            <!-- name input start -->
            <div class="form-group">
            <label for="edit-name">Name</label>
            <input type="text" id="edit-name" placeholder="Insert name">
            </div>
            <!-- name input ends -->

            <!-- age input start -->
            <div class="form-group">
            <label for="edit-age">Age (mininum 12 years old)</label>
            <input type="number" id="edit-age" min="12" placeholder="Insert age">
            </div>
            <!-- age input ends -->

            <!-- gender input start -->
            <div class="form-group">
            <label for="edit-gender">Gender</label>
            <select id="edit-gender">
                <option value="" disabled selected>Select gender</option>
                <option value="FEMALE">Female</option>
                <option value="MALE">Male</option>
            </select>
            </div>
            <!-- gender input ends -->

            <!-- bodyweight input start -->
            <div class="form-group">
            <label for="edit-weight">Weight (kg)</label>
            <input type="number" id="edit-weight" min="1" placeholder="Insert bodyweight">
            </div>
            <!-- bodyweight input ends -->

            <!-- save or discard buttons starts -->
            <div class="form-group"></div>
            <div class="save-discard-button-container">
                <button id="save-btn" onclick="saveParticipant()">Save</button>
                <button id="discard-btn" onclick="document.getElementById('popupeditparticipant').style.display = 'none'">Discard</button>
            </div>
            </div>
            <!-- save or discard buttons ends -->
        </div>
    </div>
    <!-- edit participant popup ends -->

</body>
<!-- script to load all participants -->
<script>
    function loadParticipants() {
        const participantsContainer = document.getElementById("participants-container");
        const participants = JSON.parse(localStorage.getItem("participants")) || [];

        participantsContainer.innerHTML = "";

        participants.forEach((p, index) => {
            const box = document.createElement("div");
            box.className = "participant-box";
            box.innerHTML = `
                <div class="participant-name">${p.name}</div>
                <div class="participant-gender">${p.gender}</div>
                <div class="participant-category">${p.category}</div>
            `;
            box.addEventListener("click", () => editParticipantDetail(index))
            participantsContainer.appendChild(box);
        })
    }
    document.addEventListener("DOMContentLoaded", loadParticipants);

    // window.addEventListener("participantUpdated", (event) => {
    //     if (event.key === "participants") {
    //         loadParticipants();
    //     }
    // })

</script> 

<script src="../js/register.js"></script>
<script src="../js/edit.js"></script>

</html>